(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),s=(a(93),a(17)),i=a.n(s),o=a(29),u=a(12),m=a(13),d=a(161),b=a(162),p=a(4),f=a(47),v=a.n(f),E=a(24),g=a(170),O=a(46),y=a.n(O),h=function(e){return{fontSize16:{fontSize:16},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,flexBasis:200},button:{margin:e.spacing(1)},leftIcon:{marginRight:e.spacing(1)}}},j=a(22),w=a.n(j),x=Object(p.a)(h)(Object(E.withSnackbar)(function(e){var t=e.classes,a=e.enqueueSnackbar,c=Object(n.useState)(!1),l=Object(m.a)(c,2),s=l[0],u=l[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),E=f[0],O=f[1],h=Object(n.useState)({}),j=Object(m.a)(h,2),x=j[0],S=j[1],k=Object(n.useState)(""),D=Object(m.a)(k,2),N=D[0],C=D[1],P=Object(n.useState)(""),I=Object(m.a)(P,2),B=I[0],T=I[1],q=function(){var t=Object(o.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("/gateway",{name:N,ip:B}).catch(function(e){a(e.response.data.message,{variant:"error"})});case 2:!(n=t.sent)||200!==n.status&&201!==n.status||(a(n.data.message,{variant:"success"}),u(!1),C(""),T(""),e.onSubmitEventHandler());case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Object(o.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.put("/gateway",{name:N,ip:B,id:e.gatewayObject._id}).catch(function(e){a(e.response.data.message,{variant:"error"})});case 2:!(n=t.sent)||200!==n.status&&201!==n.status||(a(n.data.message,{variant:"success"}),u(!1),C(""),T(""),e.onSubmitEventHandler());case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e={};""===N.trim()&&(e.name="This field is required"),""===B.trim()?e.ip="This field is required":v.a.ipv4(B)||(e.ip="Wrong IPv4 Format"),S(e),u(v.a.empty(e))},[B,N]),Object(n.useEffect)(function(){v.a.object(e.gatewayObject)&&(C(e.gatewayObject.name),T(e.gatewayObject.ip),O(!0))},[e.gatewayObject]),r.a.createElement("form",{style:{display:"flex",flexWrap:"wrap",margin:25}},r.a.createElement("h4",null,"ADD GATEWAY"),r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(g.a,{margin:"dense",onChange:function(e){return C(e.target.value)},label:"Name",error:x.name,helperText:x.name,value:N,InputProps:{className:t.fontSize16},variant:"outlined"})),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(g.a,{margin:"dense",error:x.ip,helperText:x.ip,onChange:function(e){return T(e.target.value)},label:"IPv4 Address",value:B,InputProps:{className:t.fontSize16},variant:"outlined"})),r.a.createElement(d.a,{item:!0,xs:2},r.a.createElement(b.a,{style:{marginTop:10},variant:"contained",color:"primary",disabled:!s,onClick:function(){E?z():q()}},r.a.createElement(y.a,{className:t.leftIcon}),"Submit"))))})),S=a(76),k=a.n(S),D=a(75),N=a(163),C=a(172),P=Object(p.a)(h)(Object(E.withSnackbar)(function(e){var t=e.classes,a=e.enqueueSnackbar,c=Object(n.useState)(!1),l=Object(m.a)(c,2),s=l[0],u=l[1],p=Object(n.useState)({}),f=Object(m.a)(p,2),v=f[0],E=f[1],O=Object(n.useState)(""),h=Object(m.a)(O,2),j=h[0],x=h[1],S=Object(n.useState)(!1),k=Object(m.a)(S,2),P=k[0],I=k[1],B=function(){var t=Object(o.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.post("/device",{vendor:j,status:P,gatewayId:e.gatewayObject._id}).catch(function(e){a(e.response.data.message,{variant:"error"})});case 2:!(n=t.sent)||200!==n.status&&201!==n.status||(a(n.data.message,{variant:"success"}),u(!1),I(!1),x(""),e.onSubmitEventHandler());case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e={};""===j.trim()&&(e.vendor="This field is required"),E(e),u(Object(D.isEmpty)(e))},[j]),r.a.createElement("form",{style:{display:"flex",flexWrap:"wrap",margin:25}},r.a.createElement("h4",null,"ADD DEVICE ",e.gatewayObject&&r.a.createElement("span",null," TO  ",r.a.createElement("i",null,e.gatewayObject.name," "))),r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(g.a,{margin:"dense",onChange:function(e){return x(e.target.value)},label:"Vendor",error:v.vendor,helperText:v.vendor,value:j,InputProps:{classVendor:t.fontSize16},variant:"outlined"})),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(N.a,{control:r.a.createElement(C.a,{value:P,onChange:function(){return I(!P)},color:"primary"}),label:"Status",color:"primary"})),r.a.createElement(d.a,{item:!0,xs:2},r.a.createElement(b.a,{style:{marginTop:10},variant:"contained",color:"primary",disabled:!s,onClick:B},r.a.createElement(y.a,{classVendor:t.leftIcon}),"Submit"))))})),I=a(164),B=a(165),T=a(166),q=a(167),z=a(168),W=a(169),_=function(e){return r.a.createElement("div",{className:"table-scrollable table-scrollable-borderless"},r.a.createElement("table",{className:"table table-light table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"uppercase bold text-left"},r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}}," Name"),r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}},"IP"),r.a.createElement("th",{className:"text-left",style:{width:100,borderBottom:"1px solid #1c9e8a"}},"Devices"),r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}},"Options"))),r.a.createElement("tbody",null,e.data.map(function(t,a){var n=t.deviceCount<5,c=t===e.gatewayObject,l={color:c?"#fff":""};return r.a.createElement("tr",{key:a,style:{background:c?"#3598DC":""}},r.a.createElement("td",{style:l},t.name),r.a.createElement("td",{style:l},t.ip),r.a.createElement("td",{style:l},r.a.createElement(I.a,{color:n?"primary":"secondary",onClick:function(){return e.getDevices(t)}},r.a.createElement(B.a,{badgeContent:t.deviceCount,color:n?"primary":"secondary",invisible:0===t.deviceCount},r.a.createElement(T.a,null)))),r.a.createElement("td",{style:l},n&&r.a.createElement(I.a,{color:"primary",onClick:function(){return e.addDevice(t)}},r.a.createElement(q.a,null)),r.a.createElement(I.a,{color:"primary",onClick:function(){return e.editDevice(t)}},r.a.createElement(z.a,null)),r.a.createElement(I.a,{color:"secondary",onClick:function(){return e.removeGateway(t._id)}},r.a.createElement(W.a,null))))}))))},A=function(e){return r.a.createElement("div",{className:"table-scrollable table-scrollable-borderless"},r.a.createElement("table",{className:"table table-light table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"uppercase bold text-left"},r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}}," Vendor"),r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}},"Status"),r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}},"Created"),r.a.createElement("th",{className:"text-left",style:{width:180,borderBottom:"1px solid #1c9e8a"}},"Options"))),r.a.createElement("tbody",null,e.data.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.vendor),r.a.createElement("td",null,t.status?"Online":"Offline"),r.a.createElement("td",null,new Date(t.created).toDateString()),r.a.createElement("td",null,r.a.createElement(I.a,{color:"secondary",onClick:function(){return e.removeDevice(t._id)}},r.a.createElement(W.a,null))))}))))};function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach(function(t){Object(u.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var F=Object(p.a)(h)(Object(E.withSnackbar)(function(e){var t=e.classes,a=e.enqueueSnackbar,c=Object(n.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),v=f[0],E=f[1],g=Object(n.useState)(!1),O=Object(m.a)(g,2),y=O[0],h=O[1],j=Object(n.useState)([]),S=Object(m.a)(j,2),D=S[0],N=S[1],C=Object(n.useState)([]),I=Object(m.a)(C,2),B=I[0],T=I[1],q=Object(n.useState)(!1),z=Object(m.a)(q,2),W=z[0],H=z[1],F=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];E(!0),h(e),T([]),H(!1)},G=function(){w.a.get("/gateway").then(function(e){N(e.data)})},J=function(e){e!==s&&u(e),w.a.get("/device/"+e._id).then(function(e){H(!0),e.data.length>0?(T(e.data),E(e.data.length<5)):T([])})},M=function(e){u(e),E(!0),h(!0)},R=function(){var e=Object(o.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("/gateway/"+t).catch(function(e){a(e.response.data.message,{variant:"error"})});case 2:!(n=e.sent)||200!==n.status&&201!==n.status||(G(),a(n.data.message,{variant:"success"}),s&&s._id===t&&(T([]),H(!1),E(!1)));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.delete("/device/"+t).catch(function(e){a(e.response.data.message,{variant:"error"})});case 2:!(n=e.sent)||200!==n.status&&201!==n.status||(a(n.data.message,{variant:"success"}),G(),r=V({},s),J(r));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Y=Object(n.useMemo)(function(){return r.a.createElement(_,{data:D,addDevice:function(e){F(!1),T([]),J(e)},gatewayObject:s,getDevices:J,removeGateway:R,editDevice:M})},[D,s,R]),$=Object(n.useMemo)(function(){return r.a.createElement(A,{data:B,removeDevice:L})},[B]);return Object(n.useEffect)(G,[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,xs:1},r.a.createElement(b.a,{style:{marginTop:10},variant:"contained",color:"primary",onClick:F},r.a.createElement(k.a,{className:t.leftIcon}),"Gateway")),y&&v&&r.a.createElement(d.a,{item:!0,xs:5},r.a.createElement(x,{gatewayObject:s,onSubmitEventHandler:function(){G(),E(!1),H(!1),T([])}}))),r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,xs:6},Y),r.a.createElement(d.a,{item:!0,xs:6},!y&&v&&r.a.createElement(P,{gatewayObject:s,onSubmitEventHandler:function(){if(G(),W&&s){var e=V({},s);J(e)}}}),W&&$)))})),G=(a(128),function(){return r.a.createElement(E.SnackbarProvider,{preventDuplicate:!0,maxstack:1,anchorOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,a){e.exports=a(130)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.872d3403.chunk.js.map